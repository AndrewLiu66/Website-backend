(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[39],{1344:function(t,e,n){"use strict";n.r(e),n.d(e,"loadGLTFMesh",(function(){return S}));var r=n(60),c=n(155),o=n(154),a=n.n(o),u=n(201),i=n(188),s=n(469),l=n(185),b=n(146),f=n(206),O=n(334),j=n(209),p=n(366),d=n(872),m=n(874),v=n(873),g=n(737),x=n(444),h=n(572),w=n(1045),y=n(1074),k=n(621),A=n(1046),C=n(1065),T=n(1047),E=n(915),B=n(1056),R=n(153),M=n(573),F=n(739),I=n(738);function S(t,e,n){return q.apply(this,arguments)}function q(){return(q=Object(c.a)(a.a.mark((function t(e,n,c){var o,u,i,s,l,f,O,j,p,d,m,v,x,h,w,y,T;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new A.a(L(c)),t.next=3,Object(C.a)(o,n,c,!0);case 3:u=t.sent.model,i=u.lods.shift(),s=new Map,l=new Map,u.textures.forEach((function(t,e){return s.set(e,P(t))})),u.materials.forEach((function(t,e){return l.set(e,_(t,s))})),f=G(i),O=Object(r.a)(f.parts);try{for(O.s();!(j=O.n()).done;)p=j.value,J(f,p,l)}catch(a){O.e(a)}finally{O.f()}return d=f.vertexAttributes,m=d.position,v=d.normal,x=d.tangent,h=d.color,w=d.texCoord0,y={position:m.typedBuffer,normal:Object(b.k)(v)?v.typedBuffer:null,tangent:Object(b.k)(x)?x.typedBuffer:null,uv:Object(b.k)(w)?w.typedBuffer:null,color:Object(b.k)(h)?h.typedBuffer:null},T=Object(k.c)(y,e,c),t.abrupt("return",{transform:T.transform,components:f.components,spatialReference:e.spatialReference,vertexAttributes:new g.a({position:T.vertexAttributes.position,normal:T.vertexAttributes.normal,tangent:T.vertexAttributes.tangent,color:y.color,uv:y.uv})});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t){return null!==t&&void 0!==t&&t.resolveFile?{busy:!1,request:function(){var e=Object(c.a)(a.a.mark((function e(n,r,c){var o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.resolveFile(n),u="image"===r?"image":"binary"===r?"array-buffer":"json",e.next=3,Object(i.default)(o,{responseType:u,signal:Object(b.k)(c)?c.signal:null});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}:null}function N(t,e){if(Object(b.j)(t))return"-";var n=t.typedBuffer;return"".concat(Object(s.a)(e,n.buffer,(function(){return e.size})),"/").concat(n.byteOffset,"/").concat(n.byteLength)}function G(t){var e,n=0,c={color:!1,tangent:!1,normal:!1,texCoord0:!1},o=new Map,a=new Map,u=[],i=Object(r.a)(t.parts);try{var l=function(){var t=e.value,r=t.attributes,i=r.position,l=r.normal,f=r.color,O=r.tangent,j=r.texCoord0,p="\n      ".concat(N(i,o),"/\n      ").concat(N(l,o),"/\n      ").concat(N(f,o),"/\n      ").concat(N(O,o),"/\n      ").concat(N(j,o),"/\n      ").concat(function(t){return Object(b.k)(t)?t.toString():"-"}(t.transform),"\n    "),d=!1,m=Object(s.a)(a,p,(function(){return d=!0,{start:n,length:i.count}}));d&&(n+=i.count),l&&(c.normal=!0),f&&(c.color=!0),O&&(c.tangent=!0),j&&(c.texCoord0=!0),u.push({gltf:t,writeVertices:d,region:m})};for(i.s();!(e=i.n()).done;)l()}catch(f){i.e(f)}finally{i.f()}return{vertexAttributes:{position:Object(y.a)(x.v,n),normal:c.normal?Object(y.a)(x.u,n):null,tangent:c.tangent?Object(y.a)(x.C,n):null,color:c.color?Object(y.a)(x.J,n):null,texCoord0:c.texCoord0?Object(y.a)(x.m,n):null},parts:u,components:[]}}function P(t){return new v.a({data:t.data,wrap:D(t.parameters.wrap)})}function _(t,e){var n,r=new u.a(function(t,e){return Object(p.c)(H(t[0]),H(t[1]),H(t[2]),e)}(t.color,t.opacity)),c=t.emissiveFactor?new u.a((n=t.emissiveFactor,Object(j.g)(H(n[0]),H(n[1]),H(n[2])))):null;return new m.a({color:r,colorTexture:Object(b.q)(Object(b.b)(t.textureColor,(function(t){return e.get(t)}))),normalTexture:Object(b.q)(Object(b.b)(t.textureNormal,(function(t){return e.get(t)}))),emissiveColor:c,emissiveTexture:Object(b.q)(Object(b.b)(t.textureEmissive,(function(t){return e.get(t)}))),occlusionTexture:Object(b.q)(Object(b.b)(t.textureOcclusion,(function(t){return e.get(t)}))),alphaMode:z(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:Object(b.q)(Object(b.b)(t.textureMetallicRoughness,(function(t){return e.get(t)})))})}function J(t,e,n){e.writeVertices&&function(t,e){var n=t.vertexAttributes,r=n.position,c=n.normal,o=n.tangent,a=n.color,u=n.texCoord0,i=e.region.start,s=e.gltf,j=s.attributes,p=s.transform,d=j.position.count;if(Object(h.e)(r.slice(i,d),j.position,p),Object(b.k)(j.normal)&&Object(b.k)(c)){var m=Object(f.a)(Object(O.b)(),p),v=c.slice(i,d);Object(h.a)(v,j.normal,m),Object(l.g)(m)&&Object(h.c)(v,v)}else Object(b.k)(c)&&Object(M.b)(c,0,0,1,{dstIndex:i,count:d});if(Object(b.k)(j.tangent)&&Object(b.k)(o)){var g=Object(f.a)(Object(O.b)(),p),y=o.slice(i,d);Object(w.d)(y,j.tangent,g),Object(l.g)(g)&&Object(w.b)(y,y)}else Object(b.k)(o)&&Object(F.b)(o,0,0,1,1,{dstIndex:i,count:d});if(Object(b.k)(j.texCoord0)&&Object(b.k)(u)?Object(I.b)(u.slice(i,d),j.texCoord0):Object(b.k)(u)&&Object(I.a)(u,0,0,{dstIndex:i,count:d}),Object(b.k)(j.color)&&Object(b.k)(a)){var k=j.color,A=a.slice(i,d);if(4===k.elementCount)k instanceof x.C?Object(w.c)(A,k,255):k instanceof x.J?Object(F.a)(A,k):k instanceof x.H&&Object(w.a)(A,k,8);else{Object(F.b)(A,255,255,255,255);var C=x.B.fromTypedArray(A.typedBuffer,A.typedBufferStride);k instanceof x.u?Object(h.d)(C,k,255):k instanceof x.B?Object(M.a)(C,k):k instanceof x.z&&Object(h.b)(C,k,8)}}else Object(b.k)(a)&&Object(F.b)(a.slice(i,d),255,255,255,255)}(t,e);var r=e.gltf,c=function(t,e){switch(e){case R.r.TRIANGLES:return Object(T.c)(t,E.d);case R.r.TRIANGLE_STRIP:return Object(T.b)(t);case R.r.TRIANGLE_FAN:return Object(T.a)(t)}}(r.indices||r.attributes.position.count,r.primitiveType),o=e.region.start;if(o)for(var a=0;a<c.length;a++)c[a]+=o;t.components.push(new d.a({faces:c,material:n.get(r.material),trustSourceNormals:!0}))}function z(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function D(t){return{horizontal:V(t.s),vertical:V(t.t)}}function V(t){switch(t){case R.B.CLAMP_TO_EDGE:return"clamp";case R.B.MIRRORED_REPEAT:return"mirror";case R.B.REPEAT:return"repeat"}}function H(t){return 255*Math.pow(t,1/B.a)}}}]);