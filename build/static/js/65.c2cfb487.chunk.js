(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[65,79],{1227:function(e,t,n){"use strict";n.r(t),n.d(t,"SceneLayerSnappingSourceWorker",(function(){return ue})),n.d(t,"default",(function(){return ce}));var r=n(60),i=n(155),o=n(142),a=n(143),u=n(154),c=n.n(u),s=n(148),f=n(146),l=n(164),d=(n(157),n(150),n(152),n(147),n(234),n(149)),h=n(222),O=n(209),b=n(850),v=n(546),g=n(908),p=n(353),j=n(499),_=n(481),m=(n(396),n(394),n(366)),T=n(541);n(416);function y(e){return e?{ray:Object(T.c)(e.ray),c0:e.c0,c1:e.c1}:{ray:Object(T.c)(),c0:0,c1:Number.MAX_VALUE}}new _.a((function(){return{c0:0,c1:0,ray:null}})),n(185),n(575);Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)();Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)();var E,A;(A=E||(E={}))[A.NONE=0]="NONE",A[A.CLAMP=1]="CLAMP",A[A.INFINITE_MIN=4]="INFINITE_MIN",A[A.INFINITE_MAX=8]="INFINITE_MAX";var N,I,k;E.INFINITE_MIN,E.INFINITE_MAX,E.INFINITE_MAX;function R(e,t){for(var n=0;n<S.NUM;n++){var r=e[n];if(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]>=t[3])return!1}return!0}(k=N||(N={}))[k.LEFT=0]="LEFT",k[k.RIGHT=1]="RIGHT",k[k.BOTTOM=2]="BOTTOM",k[k.TOP=3]="TOP",k[k.NEAR=4]="NEAR",k[k.FAR=5]="FAR",function(e){e[e.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",e[e.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",e[e.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",e[e.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",e[e.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",e[e.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",e[e.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",e[e.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(I||(I={}));var S,w;I.FAR_BOTTOM_RIGHT,I.NEAR_BOTTOM_RIGHT,I.NEAR_BOTTOM_LEFT,I.FAR_BOTTOM_LEFT,I.NEAR_BOTTOM_LEFT,I.NEAR_BOTTOM_RIGHT,I.NEAR_TOP_RIGHT,I.NEAR_TOP_LEFT,I.FAR_BOTTOM_RIGHT,I.FAR_BOTTOM_LEFT,I.FAR_TOP_LEFT,I.FAR_TOP_RIGHT,I.NEAR_BOTTOM_RIGHT,I.FAR_BOTTOM_RIGHT,I.FAR_TOP_RIGHT,I.NEAR_TOP_RIGHT,I.FAR_BOTTOM_LEFT,I.NEAR_BOTTOM_LEFT,I.NEAR_TOP_LEFT,I.FAR_TOP_LEFT,I.FAR_TOP_LEFT,I.NEAR_TOP_LEFT,I.NEAR_TOP_RIGHT,I.FAR_TOP_RIGHT;!function(e){e[e.NUM=6]="NUM"}(S||(S={})),function(e){e[e.NUM=8]="NUM"}(w||(w={}));Object(m.c)(-1,-1,-1,1),Object(m.c)(1,-1,-1,1),Object(m.c)(1,1,-1,1),Object(m.c)(-1,1,-1,1),Object(m.c)(-1,-1,1,1),Object(m.c)(1,-1,1,1),Object(m.c)(1,1,1,1),Object(m.c)(-1,1,1,1),new _.a(y),Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)(),Object(O.e)();var M=n(515),F=function(){function e(t,n){Object(o.a)(this,e),this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new L,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}return Object(a.a)(e,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}},{key:"destroy",value:function(){this._degenerateObjects.clear(),L.clearPool(),q[0]=null,J.prune(),re.prune()}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);for(var n=L.acquire(),r=0;r<t;r++){var i=e[r];this._isDegenerate(i)?this._degenerateObjects.add(i):(n.init(this._root),this._add(i,n))}L.release(n)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;var n,i=L.acquire(),o=Object(r.a)(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=Object(f.k)(t)?t:Object(v.a)(this._objectToBoundingSphere(a),Q);G(u[3])?(i.init(this._root),this._remove(a,u,i)):this._degenerateObjects.delete(a)}}catch(c){o.e(c)}finally{o.f()}L.release(i),this._shrink()}},{key:"update",value:function(e,t){if(G(t[3])||!this._isDegenerate(e)){var n=function(e){return q[0]=e,q}(e);this.remove(n,t),this.add(n)}}},{key:"forEachAlongRay",value:function(e,t,n){var r=this,i=Object(T.e)(e,t);this._forEachNode(this._root,(function(e){if(!r._intersectsNode(i,e))return!1;var t=e.node;return t.terminals.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),!0}))}},{key:"forEachAlongRayWithVerticalOffset",value:function(e,t,n,r){var i=this,o=Object(T.e)(e,t);this._forEachNode(this._root,(function(e){if(!i._intersectsNodeWithOffset(o,e,r))return!1;var t=e.node;return t.terminals.forAll((function(e){i._intersectsObjectWithOffset(o,e,r)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){i._intersectsObjectWithOffset(o,e,r)&&n(e)})),!0}))}},{key:"forEach",value:function(e){this._forEachNode(this._root,(function(t){var n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}},{key:"forEachDegenerateObject",value:function(e){this._degenerateObjects.forEach(e)}},{key:"findClosest",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=1/0,u=1/0,c=null,s=V(e,t),f=function(s){if(--o,i(s)){var f=r._objectToBoundingSphere(s);if(R(n,f)){var l=U(e,t,Object(v.e)(f)),d=l-f[3],h=l+f[3];d<a&&(a=d,u=h,c=s)}}};return this._forEachNodeDepthOrdered(this._root,(function(r){if(o<=0||!R(n,r.bounds))return!1;if(Object(h.i)(K,s,r.halfSize),Object(h.c)(K,K,r.bounds),U(e,t,K)>u)return!1;var i=r.node;return i.terminals.forAll((function(e){return f(e)})),null!==i.residents&&i.residents.forAll((function(e){return f(e)})),!0}),e,t),c}},{key:"forEachInDepthRange",value:function(t,n,r,i,o,a,u){var c=this,s=-1/0,f=1/0,l={setRange:function(t){r===e.DepthOrder.FRONT_TO_BACK?(s=Math.max(s,t.near),f=Math.min(f,t.far)):(s=Math.max(s,-t.far),f=Math.min(f,-t.near))}};l.setRange(i);var d=U(n,r,t),O=V(n,r),b=V(n,-r),g=function(e){if(u(e)){var t=c._objectToBoundingSphere(e),i=Object(v.e)(t),h=U(n,r,i)-d,O=h-t[3],b=h+t[3];O>f||b<s||!R(a,t)||o(e,l)}};this._forEachNodeDepthOrdered(this._root,(function(e){if(!R(a,e.bounds))return!1;if(Object(h.i)(K,O,e.halfSize),Object(h.c)(K,K,e.bounds),U(n,r,K)-d>f)return!1;if(Object(h.i)(K,b,e.halfSize),Object(h.c)(K,K,e.bounds),U(n,r,K)-d<s)return!1;var t=e.node;return t.terminals.forAll((function(e){return g(e)})),null!==t.residents&&t.residents.forAll((function(e){return g(e)})),!0}),n,r)}},{key:"forEachNode",value:function(e){this._forEachNode(this._root,(function(t){return e(t.node,t.bounds,t.halfSize)}))}},{key:"forEachNeighbor",value:function(e,t){var n=this,r=Object(v.c)(t),i=Object(v.e)(t),o=function(t){var o=n._objectToBoundingSphere(t),a=Object(v.c)(o),u=r+a;Object(h.f)(Object(v.e)(o),i)-u*u<=0&&e(t)};this._forEachNode(this._root,(function(e){var t=Object(v.c)(e.bounds),n=r+t;if(Object(h.f)(Object(v.e)(e.bounds),i)-n*n>0)return!1;var a=e.node;return a.terminals.forAll((function(e){return o(e)})),null!==a.residents&&a.residents.forAll((function(e){return o(e)})),!0})),this.forEachDegenerateObject(o)}},{key:"_intersectsNode",value:function(e,t){return B(t.bounds,2*-t.halfSize,Y),B(t.bounds,2*t.halfSize,Z),Object(M.b)(e.origin,e.direction,Y,Z)}},{key:"_intersectsNodeWithOffset",value:function(e,t,n){return B(t.bounds,2*-t.halfSize,Y),B(t.bounds,2*t.halfSize,Z),n.applyToMinMax(Y,Z),Object(M.b)(e.origin,e.direction,Y,Z)}},{key:"_intersectsObject",value:function(e,t){var n=this._objectToBoundingSphere(t);return!(n[3]>0)||Object(v.f)(n,e)}},{key:"_intersectsObjectWithOffset",value:function(e,t,n){var r=this._objectToBoundingSphere(t);return!(r[3]>0)||Object(v.f)(n.applyToBoundingSphere(r),e)}},{key:"_forEachNode",value:function(e,t){for(var n=L.acquire().init(e),r=[n];0!==r.length;){if(t(n=r.pop())&&!n.isLeaf())for(var i=0;i<n.node.children.length;i++)n.node.children[i]&&r.push(L.acquire().init(n).advance(i));L.release(n)}}},{key:"_forEachNodeDepthOrdered",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DepthOrder.FRONT_TO_BACK,o=L.acquire().init(t),a=[o];for(C(r,i,ie);0!==a.length;){if(n(o=a.pop())&&!o.isLeaf())for(var u=7;u>=0;--u){var c=ie[u];o.node.children[c]&&a.push(L.acquire().init(o).advance(c))}L.release(o)}}},{key:"_remove",value:function(e,t,n){J.clear();var r=n.advanceTo(t,(function(e,t){J.push(e.node),J.push(t)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(e),0===r.length)for(var i=J.length-2;i>=0;i-=2){var o=J.data[i],a=J.data[i+1];if(!this._purge(o,a))break}}},{key:"_nodeIsEmpty",value:function(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(var t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}},{key:"_purge",value:function(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new j.a({shrink:!0})),!0)}},{key:"_add",value:function(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}},{key:"_split",value:function(e){var t=e.node.residents;e.node.residents=null;for(var n=0;n<t.length;n++){var r=L.acquire().init(e);this._add(t.getItemAt(n),r),L.release(r)}}},{key:"_grow",value:function(e,t){var n=this;if(0!==t&&(D(e,t,(function(e){return n._objectToBoundingSphere(e)}),$),G($[3])&&!this._fitsInsideTree($)))if(this._nodeIsEmpty(this._root.node))Object(v.a)($,this._root.bounds),this._root.halfSize=1.25*$[3];else{var r=this._rootBoundsForRootAsSubNode($);this._placingRootViolatesMaxDepth(r)?this._rebuildTree($,r):this._growRootAsSubNode(r),L.release(r)}}},{key:"_rebuildTree",value:function(e,t){var n=this;Object(h.e)(ee,t.bounds),ee[3]=t.halfSize,D([e,ee],2,(function(e){return e}),te);var r=L.acquire().init(this._root);this._root.initFrom(null,te,1.25*te[3]),this._forEachNode(r,(function(e){return n.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&n.add(e.node.residents.data,e.node.residents.length),!0})),L.release(r)}},{key:"_placingRootViolatesMaxDepth",value:function(e){var t=this,n=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E,r=0;return this._forEachNode(this._root,(function(e){return(r=Math.max(r,e.depth))+n<=t._maximumDepth})),r+n>this._maximumDepth}},{key:"_rootBoundsForRootAsSubNode",value:function(e){for(var t=e[3],n=e,r=-1/0,i=this._root.bounds,o=this._root.halfSize,a=0;a<3;a++){var u=i[a]-o-(n[a]-t),c=n[a]+t-(i[a]+o),s=Math.max(0,Math.ceil(u/(2*o))),f=Math.max(0,Math.ceil(c/(2*o)))+1,l=Math.pow(2,Math.ceil(Math.log(s+f)*Math.LOG2E));r=Math.max(r,l),ne[a].min=s,ne[a].max=f}for(var d=0;d<3;d++){var h=ne[d].min,O=ne[d].max,b=(r-(h+O))/2;h+=Math.ceil(b),O+=Math.floor(b);var v=i[d]-o-h*o*2;W[d]=v+(O+h)*o}return W[3]=r*o*X,L.acquire().initFrom(null,W,r*o,0)}},{key:"_growRootAsSubNode",value:function(e){var t=this._root.node;Object(h.e)($,this._root.bounds),$[3]=this._root.halfSize,this._root.init(e),e.advanceTo($,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}},{key:"_shrink",value:function(){for(;;){var e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}},{key:"_findShrinkIndex",value:function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var e=null,t=this._root.node.children,n=0,r=0;r<t.length&&null==e;)e=t[n=r++];for(;r<t.length;)if(t[r++])return-1;return n}},{key:"_isDegenerate",value:function(e){return!G(this._objectToBoundingSphere(e)[3])}},{key:"_fitsInsideTree",value:function(e){var t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}]),e}(),L=function(){function e(){Object(o.a)(this,e),this.bounds=Object(v.b)(),this.halfSize=0,this.initFrom(null,null,0,0)}return Object(a.a)(e,[{key:"init",value:function(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}},{key:"initFrom",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=Object(f.k)(t)?t:e.createEmptyNode(),Object(f.k)(n)&&Object(v.a)(n,this.bounds),this.halfSize=r,this.depth=i,this}},{key:"advance",value:function(t){var n=this.node.children[t];n||(n=e.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;var r=z[t];return this.bounds[0]+=r[0]*this.halfSize,this.bounds[1]+=r[1]*this.halfSize,this.bounds[2]+=r[2]*this.halfSize,this.bounds[3]=this.halfSize*X,this}},{key:"advanceTo",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}var r=this._childIndex(e);t&&t(this,r),this.advance(r)}}},{key:"isLeaf",value:function(){return null!=this.node.residents}},{key:"isTerminalFor",value:function(e){return e[3]>this.halfSize/2}},{key:"_childIndex",value:function(e){var t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}}],[{key:"createEmptyNode",value:function(){return{children:[null,null,null,null,null,null,null,null],terminals:new j.a({shrink:!0}),residents:new j.a({shrink:!0})}}},{key:"acquire",value:function(){return e._pool.acquire()}},{key:"release",value:function(t){e._pool.release(t)}},{key:"clearPool",value:function(){e._pool.prune()}}]),e}();function P(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function x(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function B(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function D(e,t,n,r){if(1===t){var i=n(e[0]);Object(v.a)(i,r)}else{Y[0]=1/0,Y[1]=1/0,Y[2]=1/0,Z[0]=-1/0,Z[1]=-1/0,Z[2]=-1/0;for(var o=0;o<t;o++){var a=n(e[o]);G(a[3])&&(P(Y,a),x(Z,a))}Object(h.j)(r,Y,Z,.5),r[3]=Math.max(Z[0]-Y[0],Z[1]-Y[1],Z[2]-Y[2])/2}}function C(e,t,n){if(!re.length)for(var r=0;r<8;++r)re.push({index:0,distance:0});for(var i=0;i<8;++i){var o=z[i];re.data[i].index=i,re.data[i].distance=U(e,t,o)}re.sort((function(e,t){return e.distance-t.distance}));for(var a=0;a<8;++a)n[a]=re.data[a].index}function V(e,t){for(var n=1/0,r=null,i=0;i<8;++i){var o=U(e,t,H[i]);o<n&&(n=o,r=H[i])}return r}function U(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function G(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}L._pool=new p.a(L),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(F||(F={}));var z=[Object(O.g)(-1,-1,-1),Object(O.g)(1,-1,-1),Object(O.g)(-1,1,-1),Object(O.g)(1,1,-1),Object(O.g)(-1,-1,1),Object(O.g)(1,-1,1),Object(O.g)(-1,1,1),Object(O.g)(1,1,1)],H=[Object(O.g)(-1,-1,-1),Object(O.g)(-1,-1,1),Object(O.g)(-1,1,-1),Object(O.g)(-1,1,1),Object(O.g)(1,-1,-1),Object(O.g)(1,-1,1),Object(O.g)(1,1,-1),Object(O.g)(1,1,1)],X=Math.sqrt(3),q=[null];var W=Object(v.b)(),K=Object(O.e)(),Y=Object(O.e)(),Z=Object(O.e)(),J=new j.a,Q=Object(v.b)(),$=Object(v.b)(),ee=Object(v.b)(),te=Object(v.b)(),ne=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],re=new j.a,ie=[0,0,0,0,0,0,0,0],oe=F,ae=n(894),ue=function(){function e(){Object(o.a)(this,e),this._idToComponent=new Map,this._components=new oe((function(e){return e.bounds})),this._edges=new oe((function(e){return e.bounds})),this._tmpLineSegment=Object(b.a)(),this._tmpP1=Object(O.e)(),this._tmpP2=Object(O.e)(),this._tmpP3=Object(O.e)(),this.remoteClient=null}return Object(a.a)(e,[{key:"fetchCandidates",value:function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return Object(l.p)(n),e.next=5,this._ensureEdgeLocations(t,n);case 5:return r=[],e.abrupt("return",(this._edges.forEachNeighbor((function(e){return i._addCandidates(t,e,r)}),t.bounds),{result:{candidates:r}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_ensureEdgeLocations",value:function(){var e=Object(i.a)(c.a.mark((function e(t,n){var i,o,a,u,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],this._components.forEachNeighbor((function(e){if(Object(f.j)(e.info)){var t=e.id,n=e.uid;i.push({id:t,uid:n})}}),t.bounds),i.length){e.next=3;break}return e.abrupt("return");case 3:return o={components:i},e.next=6,this.remoteClient.invoke("fetchAllEdgeLocations",o,Object(f.r)(n,{}));case 6:a=e.sent,u=Object(r.a)(a.components);try{for(u.s();!(s=u.n()).done;)l=s.value,this._setFetchEdgeLocations(l)}catch(c){u.e(c)}finally{u.f()}case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new se(t.id,t.bounds),e.abrupt("return",(this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this._idToComponent.get(t.id))&&(r=[],this._edges.forEachNeighbor((function(e){e.component===n&&r.push(e)}),n.bounds),this._edges.remove(r),this._components.remove([n]),this._idToComponent.delete(n.id)),e.abrupt("return",{result:{}});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setFetchEdgeLocations",value:function(e){var t=this._idToComponent.get(e.id);if(!Object(f.j)(t)&&e.uid===t.uid){for(var n=ae.extractComponentsEdgeLocationsLayout.createView(e.locations),r=new Array(n.count),i=Object(O.e)(),o=Object(O.e)(),a=0;a<n.count;a++){var u=Object(v.b)(),c=Object(v.e)(u);n.position0.getVec(a,i),n.position1.getVec(a,o),Object(h.a)(c,c,i,.5),Object(h.a)(c,c,o,.5),Object(h.c)(c,c,e.origin),u[3]=Object(h.k)(c,i);var s=new fe(t,a,u);r[a]=s}this._edges.add(r);var l=e.objectIds,d=e.origin;t.info={locations:n,objectIds:l,origin:d}}}},{key:"_addCandidates",value:function(e,t,n){var r=t.component.info,i=r.locations,o=r.origin,a=r.objectIds,u=i.position0.getVec(t.index,this._tmpP1),c=i.position1.getVec(t.index,this._tmpP2);Object(h.c)(u,u,o),Object(h.c)(c,c,o);var s=a[i.componentIndex.get(t.index)];this._addEdgeCandidate(e,s,u,c,n),this._addVertexCandidate(e,s,u,n),this._addVertexCandidate(e,s,c,n)}},{key:"_addEdgeCandidate",value:function(e,t,n,r,i){if(e.types&g.b.EDGE){var o=Object(v.e)(e.bounds),a=Object(b.c)(n,r,this._tmpLineSegment),u=Object(b.e)(a,o,this._tmpP3);if(!Object(v.g)(e.bounds,u))return null;i.push({type:"edge",objectId:t,target:Object(O.c)(u),distance:Object(h.k)(o,u),start:Object(O.c)(n),end:Object(O.c)(r)})}}},{key:"_addVertexCandidate",value:function(e,t,n,r){if(e.types&g.b.VERTEX){var i=Object(v.e)(e.bounds);if(!Object(v.g)(e.bounds,n))return null;r.push({type:"vertex",objectId:t,target:Object(O.c)(n),distance:Object(h.k)(i,n)})}}}]),e}();function ce(){return new ue}ue=Object(s.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],ue);var se=Object(a.a)((function e(t,n){Object(o.a)(this,e),this.id=t,this.bounds=n,this.info=null,this.uid=++e.uid}));se.uid=0;var fe=Object(a.a)((function e(t,n,r){Object(o.a)(this,e),this.component=t,this.index=n,this.bounds=r}))},299:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.POSITION="position",e.NORMAL="normal",e.UV0="uv0",e.AUXPOS1="auxpos1",e.AUXPOS2="auxpos2",e.MAPPOS="mapPos",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.TANGENT="tangent",e.OFFSET="offset",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.NORMALCOMPRESSED="normalCompressed",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.MODELORIGINHI="modelOriginHi",e.MODELORIGINLO="modelOriginLo",e.MODEL="model",e.MODELNORMAL="modelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMALA="normalA",e.NORMALB="normalB",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.U8PADDING="u8padding",e.U16PADDING="u16padding",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude"}(r||(r={}))},334:function(e,t,n){"use strict";function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,r,i,o,a,u,c){return[e,t,n,r,i,o,a,u,c]},createView:i},Symbol.toStringTag,{value:"Module"}))},349:function(e,t,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t){return new Float64Array(e,t,16)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r}));var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,o,a,u,c,s,f,l,d,h,O,b){return[e,t,n,r,i,o,a,u,c,s,f,l,d,h,O,b]},createView:o,IDENTITY:a},Symbol.toStringTag,{value:"Module"}))},406:function(e,t,n){"use strict";function r(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function o(e,t){return new Float64Array(e,t,4)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var a=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r){return[e,t,n,r]},createView:o,IDENTITY:a},Symbol.toStringTag,{value:"Module"}))},416:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return v}));var r=n(142),i=n(143),o=n(533),a=n(505),u=n(334),c=n(349),s=n(406),f=n(229),l=n(209),d=n(366),h=function(){function e(t,n,i){Object(r.a)(this,e),this.itemByteSize=t,this.itemCreate=n,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(i/this.itemByteSize)}return Object(i.a)(e,[{key:"get",value:function(){var e=this;0===this._itemsPtr&&Object(a.a)((function(){return e._reset()}));for(var t=Math.floor(this._itemsPtr/this._itemsPerBuffer);this._buffers.length<=t;){for(var n=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize),r=0;r<this._itemsPerBuffer;++r)this._items.push(this.itemCreate(n,r*this.itemByteSize));this._buffers.push(n)}return this._items[this._itemsPtr++]}},{key:"_reset",value:function(){for(var e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}},{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return new e(16,f.c,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return new e(24,l.d,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return new e(32,d.a,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return new e(72,u.a,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return new e(128,c.b,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return new e(32,s.d,t)}}]),e}(),O=4*o.a.KILOBYTES,b=(h.createVec2f64(),h.createVec3f64()),v=h.createVec4f64(),g=(h.createMat3f64(),h.createMat4f64());h.createQuatf64()},481:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(142),i=n(143),o=n(505),a=function(){function e(t){Object(r.a)(this,e),this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}return Object(i.a)(e,[{key:"get",value:function(){var e=this;return 0===this._itemsPtr&&Object(o.a)((function(){return e._reset()})),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}},{key:"_reset",value:function(){var e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*u);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}},{key:"_grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this._items.length,u));e++)this._items.push(this.allocator())}}]),e}(),u=1024},490:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(60),i=n(142),o=n(143),a=n(444),u=n(538),c=function(){function e(t,n){Object(i.a)(this,e),this.layout=t,this.buffer="number"==typeof n?new ArrayBuffer(n*t.stride):n;var o,a=Object(r.a)(t.fieldNames);try{for(a.s();!(o=a.n()).done;){var u=o.value,c=t.fields.get(u);this[u]=new c.constructor(this.buffer,c.offset,this.stride)}}catch(s){a.e(s)}finally{a.f()}}return Object(o.a)(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,t){var n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}},{key:"slice",value:function(t,n){return new e(this.layout,this.buffer.slice(t*this.stride,n*this.stride))}},{key:"copyFrom",value:function(e,t,n,r){var i=this.stride;if(i%4==0){var o=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(o)}else{var a=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(a)}}}]),e}(),s=function(){function e(){Object(i.a)(this,e),this.stride=0,this.fields=new Map,this.fieldNames=[]}return Object(o.a)(e,[{key:"vec2f",value:function(e,t){return this._appendField(e,a.m,t),this}},{key:"vec2f64",value:function(e,t){return this._appendField(e,a.n,t),this}},{key:"vec3f",value:function(e,t){return this._appendField(e,a.u,t),this}},{key:"vec3f64",value:function(e,t){return this._appendField(e,a.v,t),this}},{key:"vec4f",value:function(e,t){return this._appendField(e,a.C,t),this}},{key:"vec4f64",value:function(e,t){return this._appendField(e,a.D,t),this}},{key:"mat3f",value:function(e,t){return this._appendField(e,a.f,t),this}},{key:"mat3f64",value:function(e,t){return this._appendField(e,a.g,t),this}},{key:"mat4f",value:function(e,t){return this._appendField(e,a.h,t),this}},{key:"mat4f64",value:function(e,t){return this._appendField(e,a.i,t),this}},{key:"vec4u8",value:function(e,t){return this._appendField(e,a.J,t),this}},{key:"f32",value:function(e,t){return this._appendField(e,a.a,t),this}},{key:"f64",value:function(e,t){return this._appendField(e,a.b,t),this}},{key:"u8",value:function(e,t){return this._appendField(e,a.l,t),this}},{key:"u16",value:function(e,t){return this._appendField(e,a.j,t),this}},{key:"i8",value:function(e,t){return this._appendField(e,a.e,t),this}},{key:"vec2i8",value:function(e,t){return this._appendField(e,a.q,t),this}},{key:"vec2i16",value:function(e,t){return this._appendField(e,a.o,t),this}},{key:"vec2u8",value:function(e,t){return this._appendField(e,a.t,t),this}},{key:"vec4u16",value:function(e,t){return this._appendField(e,a.H,t),this}},{key:"u32",value:function(e,t){return this._appendField(e,a.k,t),this}},{key:"_appendField",value:function(e,t,n){var r=t.ElementCount*Object(u.a)(t.ElementType),i=this.stride;this.fields.set(e,{size:r,constructor:t,offset:i,optional:n}),this.stride+=r,this.fieldNames.push(e)}},{key:"alignTo",value:function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}},{key:"hasField",value:function(e){return this.fieldNames.includes(e)}},{key:"createBuffer",value:function(e){return new c(this,e)}},{key:"createView",value:function(e){return new c(this,e)}},{key:"clone",value:function(){var t=new e;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((function(e,n){return t.fields.set(n,e)})),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}]),e}();function f(){return new s}},515:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var r=n(142),i=n(143),o=(n(229),n(394),n(366)),a=(Object(o.b)(),function(){function e(t){Object(r.a)(this,e),this.message=t}return Object(i.a)(e,[{key:"toString",value:function(){return"AssertException: ".concat(this.message)}}]),e}());function u(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new a(t)}function c(e,t,n,r){var i,o=(n[0]-e[0])/t[0],a=(r[0]-e[0])/t[0];o>a&&(i=o,o=a,a=i);var u=(n[1]-e[1])/t[1],c=(r[1]-e[1])/t[1];if(u>c&&(i=u,u=c,c=i),o>c||u>a)return!1;u>o&&(o=u),c<a&&(a=c);var s=(n[2]-e[2])/t[2],f=(r[2]-e[2])/t[2];return s>f&&(i=s,s=f,f=i),!(o>f||s>a)&&(f<a&&(a=f),!(a<0))}function s(e,t,n,r){e[12]=t,e[13]=n,e[14]=r}},538:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a}));n(147);function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function o(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function a(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},541:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u}));n(152);var r=n(481),i=n(222),o=n(209);n(416);function a(e){return e?{origin:Object(o.c)(e.origin),direction:Object(o.c)(e.direction)}:{origin:Object(o.e)(),direction:Object(o.e)()}}function u(e,t){var n=l.get();return n.origin=e,n.direction=t,n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return s(e.origin,e.direction,t)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return Object(i.e)(n.origin,e),Object(i.e)(n.direction,t),n}function f(e,t,n){var r=Object(i.g)(e.direction,Object(i.d)(n,t,e.origin));return Object(i.c)(n,e.origin,Object(i.i)(n,e.direction,r)),n}var l=new r.a((function(){return{origin:null,direction:null}}))},546:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return w}));n(147);var r,i,o=n(157),a=n(185),u=n(146),c=n(396),s=n(222),f=n(209),l=n(394),d=n(366);(i=r||(r={}))[i.X=0]="X",i[i.Y=1]="Y",i[i.Z=2]="Z";var h=n(541),O=n(575),b=n(416),v=o.a.getLogger("esri.geometry.support.sphere");function g(){return Object(d.b)()}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g();return Object(l.c)(t,e)}function j(e){return e[3]}function _(e){return e}function m(e,t,n,r){return Object(d.c)(e,t,n,r)}function T(e,t,n){if(Object(u.j)(t))return!1;var r=t.origin,i=t.direction,o=y;o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2];var a=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],c=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),s=c*c-4*a*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(s<0)return!1;var f=Math.sqrt(s),l=(-c-f)/(2*a),d=(-c+f)/(2*a);return(l<0||d<l&&d>0)&&(l=d),!(l<0)&&(n&&(n[0]=r[0]+i[0]*l,n[1]=r[1]+i[1]*l,n[2]=r[2]+i[2]*l),!0)}var y=Object(f.e)();function E(e,t){return T(e,t,null)}function A(e,t,n){var r=b.b.get(),i=b.a.get();Object(s.h)(r,t.origin,t.direction);var o=j(e);Object(s.h)(n,r,t.origin),Object(s.i)(n,n,1/Object(s.n)(n)*o);var a=I(e,t.origin),u=Object(O.a)(t.origin,n);return Object(c.c)(i,u+a,r),Object(s.o)(n,n,i),n}function N(e,t,n){var r=Object(s.d)(b.b.get(),t,e),i=Object(s.i)(b.b.get(),r,e[3]/Object(s.n)(r));return Object(s.c)(n,i,e)}function I(e,t){var n=Object(s.d)(b.b.get(),t,e),r=Object(s.n)(n),i=j(e),o=i+Math.abs(i-r);return Object(a.a)(i/o)}var k=Object(f.e)();function R(e,t,n,i){var o=Object(s.d)(k,t,e);switch(n){case r.X:var u=Object(a.c)(o,k)[2];return Object(s.u)(i,-Math.sin(u),Math.cos(u),0);case r.Y:var c=Object(a.c)(o,k),f=c[1],l=c[2],d=Math.sin(f);return Object(s.u)(i,-d*Math.cos(l),-d*Math.sin(l),Math.cos(f));case r.Z:return Object(s.p)(i,o);default:return}}function S(e,t){var n=Object(s.d)(M,t,e);return Object(s.n)(n)-e[3]}function w(e,t){var n=Object(s.f)(e,t),r=j(e);return n<=r*r}var M=Object(f.e)(),F=g();Object.freeze(Object.defineProperty({__proto__:null,create:g,copy:p,fromCenterAndRadius:function(e,t){return Object(d.c)(e[0],e[1],e[2],t)},wrap:function(e){return e},clear:function(e){e[0]=e[1]=e[2]=e[3]=0},fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},getRadius:j,getCenter:_,fromValues:m,elevate:function(e,t,n){return e!==n&&Object(s.e)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return v.error("sphere.setExtent is not yet supported"),e===n?n:p(e,n)},intersectRay:T,intersectsRay:E,intersectRayClosestSilhouette:function(e,t,n){if(T(e,t,n))return n;var r=A(e,t,b.b.get());return Object(s.c)(n,t.origin,Object(s.i)(b.b.get(),t.direction,Object(s.k)(t.origin,r)/Object(s.n)(t.direction))),n},closestPointOnSilhouette:A,closestPoint:function(e,t,n){return T(e,t,n)?n:(Object(h.a)(t,e,n),N(e,n,n))},projectPoint:N,distanceToSilhouette:function(e,t){var n=Object(s.d)(b.b.get(),t,e),r=Object(s.r)(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:I,axisAt:R,altitudeAt:S,setAltitudeAt:function(e,t,n,i){var o=S(e,t),a=R(e,t,r.Z,M),u=Object(s.i)(M,a,n-o);return Object(s.c)(i,t,u)},containsPoint:w,tmpSphere:F},Symbol.toStringTag,{value:"Module"}))},575:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return a}));var r=n(185),i=n(222),o=n(209);function a(e,t){return Object(i.g)(e,t)/Object(i.n)(e)}function u(e,t){var n=Object(i.g)(e,t)/(Object(i.n)(e)*Object(i.n)(t));return-Object(r.a)(n)}Object(o.e)(),Object(o.e)()},620:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(185);function i(e,t,n){var i,s=e.byteLength/(4*t),f=new Uint32Array(e,0,s*t),l=new Uint32Array(s),d=null!==(i=null===n||void 0===n?void 0:n.minReduction)&&void 0!==i?i:0,h=(null===n||void 0===n?void 0:n.originalIndices)||null,O=h?h.length:0,b=(null===n||void 0===n?void 0:n.componentOffsets)||null,v=0;if(b)for(var g=0;g<b.length-1;g++){var p=b[g+1]-b[g];p>v&&(v=p)}else v=s;var j=Math.floor(1.1*v)+1;(null==c||c.length<2*j)&&(c=new Uint32Array(Object(r.j)(2*j)));for(var _=0;_<2*j;_++)c[_]=0;for(var m=0,T=!!b&&!!h,y=T?O:s,E=T?new Uint32Array(O):null,A=1.96,N=0!==d?Math.ceil(4*A*A/(d*d)*d*(1-d)):y,I=1,k=b?b[1]:y,R=0;R<y;R++){if(R===N){var S=1-m/R;if(S+A*Math.sqrt(S*(1-S)/R)<d)return null;N*=2}if(R===k){for(var w=0;w<2*j;w++)c[w]=0;if(h)for(var M=b[I-1];M<b[I];M++)E[M]=l[h[M]];k=b[++I]}for(var F=T?h[R]:R,L=F*t,P=u(f,L,t),x=P%j,B=m;0!==c[2*x+1];){if(c[2*x]===P){var D=c[2*x+1]-1;if(o(f,L,D*t,t)){B=l[D];break}}++x>=j&&(x-=j)}B===m&&(c[2*x]=P,c[2*x+1]=F+1,m++),l[F]=B}if(0!==d&&1-m/s<d)return null;if(T){for(var C=b[I-1];C<E.length;C++)E[C]=l[h[C]];l=E}var V=new Uint32Array(t*m);m=0;for(var U=0;U<y;U++)l[U]===m&&(a(f,(T?h[U]:U)*t,V,m*t,t),m++);if(h&&!T){for(var G=new Uint32Array(O),z=0;z<G.length;z++)G[z]=l[h[z]];l=G}return{buffer:V.buffer,indices:l,uniqueCount:m}}function o(e,t,n,r){for(var i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function a(e,t,n,r,i){for(var o=0;o<i;o++)n[r+o]=e[t+o]}function u(e,t,n){for(var r=0,i=0;i<n;i++)r=(r=e[t+i]+r|0)+(r<<11)+(r>>>2)|0;return r>>>0}var c=null},850:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return d}));var r=n(185),i=n(481),o=n(222),a=n(209),u=n(416);function c(e){return e?{origin:Object(a.c)(e.origin),vector:Object(a.c)(e.vector)}:{origin:Object(a.e)(),vector:Object(a.e)()}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return Object(o.e)(n.origin,e),Object(o.e)(n.vector,t),n}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return Object(o.e)(n.origin,e),Object(o.d)(n.vector,t,e),n}function l(e,t){var n=Object(o.d)(u.b.get(),t,e.origin),i=Object(o.g)(e.vector,n),a=Object(o.g)(e.vector,e.vector),c=Object(r.d)(i/a,0,1),s=Object(o.d)(u.b.get(),Object(o.i)(u.b.get(),e.vector,c),n);return Object(o.g)(s,s)}function d(e,t,n){return function(e,t,n,i,a){var c=e.vector,s=e.origin,f=Object(o.d)(u.b.get(),t,s),l=Object(o.g)(c,f)/Object(o.r)(c);return Object(o.i)(a,c,Object(r.d)(l,n,i)),Object(o.c)(a,a,e.origin)}(e,t,0,1,n)}Object(a.e)(),Object(a.e)(),new i.a((function(){return{origin:null,vector:null}}))},894:function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeProcessingWorker",(function(){return re})),n.d(t,"default",(function(){return ge})),n.d(t,"extract",(function(){return ie})),n.d(t,"extractComponentsEdgeLocationsLayout",(function(){return ve})),n.d(t,"extractEdgeLocationsLayout",(function(){return be}));var r=n(155),i=n(142),o=n(143),a=n(154),u=n.n(a),c=n(620);function s(e,t,n){for(var r=t/3,i=new Uint32Array(n+1),o=new Uint32Array(n+1),a=function(e,t){e<t?i[e+1]++:o[t+1]++},u=0;u<r;u++){var c=e[3*u],s=e[3*u+1],f=e[3*u+2];a(c,s),a(s,f),a(f,c)}for(var l=0,d=0,h=0;h<n;h++){var O=i[h+1],b=o[h+1];i[h+1]=l,o[h+1]=d,l+=O,d+=b}for(var v=new Uint32Array(6*r),g=i[n],p=function(e,t,n){if(e<t){var r=i[e+1]++;v[2*r]=t,v[2*r+1]=n}else{var a=o[t+1]++;v[2*g+2*a]=e,v[2*g+2*a+1]=n}},j=0;j<r;j++){var _=e[3*j],m=e[3*j+1],T=e[3*j+2];p(_,m,j),p(m,T,j),p(T,_,j)}for(var y=function(e,t){for(var n=2*e,r=t-e,i=1;i<r;i++){for(var o=v[n+2*i],a=v[n+2*i+1],u=i-1;u>=0&&v[n+2*u]>o;u--)v[n+2*u+2]=v[n+2*u],v[n+2*u+3]=v[n+2*u+1];v[n+2*u+2]=o,v[n+2*u+3]=a}},E=0;E<n;E++)y(i[E],i[E+1]),y(g+o[E],g+o[E+1]);for(var A=new Int32Array(3*r),N=function(t,n){return t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1},I=function(e,t){var n=N(e,t);A[3*t+n]=-1},k=function(e,t,n,r){var i=N(e,t);A[3*t+i]=r;var o=N(n,r);A[3*r+o]=t},R=0;R<n;R++){for(var S=i[R],w=i[R+1],M=o[R],F=o[R+1];S<w&&M<F;){var L=v[2*S],P=v[2*g+2*M];L===P?(k(R,v[2*S+1],P,v[2*g+2*M+1]),S++,M++):L<P?(I(R,v[2*S+1]),S++):(I(P,v[2*g+2*M+1]),M++)}for(;S<w;)I(R,v[2*S+1]),S++;for(;M<F;)I(v[2*g+2*M],v[2*g+2*M+1]),M++}return A}var f=n(490),l=n(5),d=n(444);function h(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:O(e.layout)}}function O(e){var t=new Array;return e.fields.forEach((function(e,n){var r=Object(l.a)(Object(l.a)({},e),{},{constructor:v(e.constructor)});t.push([n,r])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}var b=[d.a,d.m,d.u,d.C,d.f,d.h,d.b,d.n,d.v,d.D,d.g,d.i,d.l,d.t,d.B,d.J,d.j,d.r,d.z,d.H,d.k,d.s,d.A,d.I,d.e,d.q,d.y,d.G,d.c,d.o,d.w,d.E,d.d,d.p,d.x,d.F];function v(e){return"".concat(e.ElementType,"_").concat(e.ElementCount)}var g=new Map;b.forEach((function(e){return g.set(v(e),e)}));var p=n(299),j=n(153),_=n(224);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.stride;return e.fieldNames.filter((function(t){var n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((function(r){var i=e.fields.get(r),o=i.constructor.ElementCount,a=T(i.constructor.ElementType),u=i.offset,c=!(!i.optional||!i.optional.glNormalized);return new _.a(r,o,a,u,n,c,t)}))}function T(e){var t=y[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}var y={u8:j.k.UNSIGNED_BYTE,u16:j.k.UNSIGNED_SHORT,u32:j.k.UNSIGNED_INT,i8:j.k.BYTE,i16:j.k.SHORT,i32:j.k.INT,f32:j.k.FLOAT},E=Object(f.a)().vec3f(p.a.POSITION).u16(p.a.COMPONENTINDEX).u16(p.a.U16PADDING),A=(m(Object(f.a)().vec2u8(p.a.SIDENESS)),Object(f.a)().vec3f(p.a.POSITION0).vec3f(p.a.POSITION1).u16(p.a.COMPONENTINDEX).u8(p.a.VARIANTOFFSET,{glNormalized:!0}).u8(p.a.VARIANTSTROKE).u8(p.a.VARIANTEXTENSION,{glNormalized:!0}).u8(p.a.U8PADDING,{glPadding:!0}).u16(p.a.U16PADDING,{glPadding:!0})),N=A.clone().vec3f(p.a.NORMAL),I=A.clone().vec3f(p.a.NORMALA).vec3f(p.a.NORMALB),k=(new Map([[p.a.POSITION0,0],[p.a.POSITION1,1],[p.a.COMPONENTINDEX,2],[p.a.VARIANTOFFSET,3],[p.a.VARIANTSTROKE,4],[p.a.VARIANTEXTENSION,5],[p.a.NORMAL,6],[p.a.NORMALA,6],[p.a.NORMALB,7],[p.a.SIDENESS,8]]),n(241)),R=n(222),S=n(209),w=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"updateSettings",value:function(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?x:P}},{key:"write",value:function(e,t,n){var r=this.edgeHashFunction(n);z.seed=r;var i=z.getIntRange(0,255),o=z.getIntRange(0,this.settings.variants-1),a=z.getFloat(),u=255*(.5*function(e,t){var n=e<0?-1:1;return Math.pow(Math.abs(e),t)*n}(-(1-Math.min(a/.7,1))+Math.max(0,a-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,o),e.variantExtension.set(t,u)}},{key:"trim",value:function(e,t){return e.slice(0,t)}}]),e}(),M=new Float32Array(6),F=new Uint32Array(M.buffer),L=new Uint32Array(1);function P(e){var t=M;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],L[0]=5381;for(var n=0;n<F.length;n++)L[0]=31*L[0]+F[n];return L[0]}function x(e){var t=M;t[0]=B(e.position0[0]),t[1]=B(e.position0[1]),t[2]=B(e.position0[2]),t[3]=B(e.position1[0]),t[4]=B(e.position1[1]),t[5]=B(e.position1[2]),L[0]=5381;for(var n=0;n<F.length;n++)L[0]=31*L[0]+F[n];return L[0]}function B(e){return Math.round(1e4*e)/1e4}var D=function(){function e(){Object(i.a)(this,e),this.commonWriter=new w}return Object(o.a)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return N.createBuffer(e)}},{key:"write",value:function(e,t,n){this.commonWriter.write(e,t,n),Object(R.c)(G,n.faceNormal0,n.faceNormal1),Object(R.p)(G,G),e.normal.setVec(t,G)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();D.Layout=N,D.glLayout=m(N,1);var C=function(){function e(){Object(i.a)(this,e),this.commonWriter=new w}return Object(o.a)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return I.createBuffer(e)}},{key:"write",value:function(e,t,n){this.commonWriter.write(e,t,n),e.normalA.setVec(t,n.faceNormal0),e.normalB.setVec(t,n.faceNormal1)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();C.Layout=I,C.glLayout=m(I,1);var V,U,G=Object(S.e)(),z=new k.a,H=n(152),X=n(185),q=n(484),W=-1;function K(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ne,i=e.vertices.position,o=e.vertices.componentIndex,a=Object(X.f)(r.anglePlanar),u=Object(X.f)(r.angleSignificantEdge),c=Math.cos(u),s=Math.cos(a),f=ee.edge,l=f.position0,d=f.position1,h=f.faceNormal0,O=f.faceNormal1,b=$(e),v=Q(e),g=v.length/4,p=t.allocate(g),j=0,_=g,m=n.allocate(_),T=0,y=0,E=0,A=Object(H.h)(0,g),N=new Float32Array(g);Object(q.b)(N,(function(e,t,n){i.getVec(v[4*t+0],l),i.getVec(v[4*t+1],d),n[t]=Object(R.k)(l,d)})),A.sort((function(e,t){return N[t]-N[e]}));for(var I=new Array,k=new Array,S=0;S<g;S++){var w=A[S],M=N[w],F=v[4*w+0],L=v[4*w+1],P=v[4*w+2],x=v[4*w+3],B=x===W;if(i.getVec(F,l),i.getVec(L,d),B)Object(R.u)(h,b[3*P+0],b[3*P+1],b[3*P+2]),Object(R.e)(O,h),f.componentIndex=o.get(F),f.cosAngle=Object(R.g)(h,O);else{if(Object(R.u)(h,b[3*P+0],b[3*P+1],b[3*P+2]),Object(R.u)(O,b[3*x+0],b[3*x+1],b[3*x+2]),f.componentIndex=o.get(F),f.cosAngle=Object(R.g)(h,O),Z(f,s))continue;f.cosAngle<-.9999&&Object(R.e)(O,h)}y+=M,E++,B||Y(f,c)?(t.write(p,j++,f),I.push(M)):J(f,a)&&(n.write(m,T++,f),k.push(M))}var D=new Float32Array(I.reverse()),C=new Float32Array(k.reverse());return{regular:{instancesData:t.trim(p,j),lodInfo:{lengths:D}},silhouette:{instancesData:n.trim(m,T),lodInfo:{lengths:C}},averageEdgeLength:y/E}}function Y(e,t){return e.cosAngle<t}function Z(e,t){return e.cosAngle>t}function J(e,t){var n=Object(X.a)(e.cosAngle),r=ee.fwd,i=ee.ortho;return Object(R.t)(r,e.position1,e.position0),n*(Object(R.g)(Object(R.h)(i,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}function Q(e){for(var t=e.faces.length/3,n=e.faces,r=e.neighbors,i=0,o=0;o<t;o++){var a=r[3*o+0],u=r[3*o+1],c=r[3*o+2],s=n[3*o+0],f=n[3*o+1],l=n[3*o+2];i+=a===W||s<f?1:0,i+=u===W||f<l?1:0,i+=c===W||l<s?1:0}for(var d=new Int32Array(4*i),h=0,O=0;O<t;O++){var b=r[3*O+0],v=r[3*O+1],g=r[3*O+2],p=n[3*O+0],j=n[3*O+1],_=n[3*O+2];(b===W||p<j)&&(d[h++]=p,d[h++]=j,d[h++]=O,d[h++]=b),(v===W||j<_)&&(d[h++]=j,d[h++]=_,d[h++]=O,d[h++]=v),(g===W||_<p)&&(d[h++]=_,d[h++]=p,d[h++]=O,d[h++]=g)}return d}function $(e){for(var t=e.faces.length/3,n=e.vertices.position,r=e.faces,i=te.v0,o=te.v1,a=te.v2,u=new Float32Array(3*t),c=0;c<t;c++){var s=r[3*c+0],f=r[3*c+1],l=r[3*c+2];n.getVec(s,i),n.getVec(f,o),n.getVec(l,a),Object(R.d)(o,o,i),Object(R.d)(a,a,i),Object(R.h)(i,o,a),Object(R.p)(i,i),u[3*c+0]=i[0],u[3*c+1]=i[1],u[3*c+2]=i[2]}return u}(U=V||(V={}))[U.SOLID=0]="SOLID",U[U.SKETCH=1]="SKETCH";var ee={edge:{position0:Object(S.e)(),position1:Object(S.e)(),faceNormal0:Object(S.e)(),faceNormal1:Object(S.e)(),componentIndex:0,cosAngle:0},ortho:Object(S.e)(),fwd:Object(S.e)()},te={v0:Object(S.e)(),v1:Object(S.e)(),v2:Object(S.e)()},ne={anglePlanar:4,angleSignificantEdge:35},re=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"extract",value:function(){var e=Object(r.a)(u.a.mark((function e(t){var n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),r=ie(n),i=[n.data.buffer],e.abrupt("return",{result:ae(r,i),transferList:i});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractComponentsEdgeLocations",value:function(){var e=Object(r.a)(u.a.mark((function e(t){var n,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),r=ue(n.data,n.skipDeduplicate,n.indices,n.indicesLength),i=K(r,he,Oe),o=[],e.abrupt("return",{result:h(i.regular.instancesData,o),transferList:o});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractEdgeLocations",value:function(){var e=Object(r.a)(u.a.mark((function e(t){var n,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),r=ue(n.data,n.skipDeduplicate,n.indices,n.indicesLength),i=K(r,de,Oe),o=[],e.abrupt("return",{result:h(i.regular.instancesData,o),transferList:o});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ie(e){var t=ue(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return ce.updateSettings(e.writerSettings),se.updateSettings(e.writerSettings),K(t,ce,se)}function oe(e){return{data:E.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function ae(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:h(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:h(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function ue(e,t,n,r){if(t)return{faces:n,facesLength:r,neighbors:s(n,r,e.count),vertices:e};var i=Object(c.a)(e.buffer,e.stride/4,{originalIndices:n,originalIndicesLength:r}),o=s(i.indices,r,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:o,vertices:E.createView(i.buffer)}}var ce=new D,se=new C,fe=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"allocate",value:function(e){return be.createBuffer(e)}},{key:"trim",value:function(e,t){return e.slice(0,t)}},{key:"write",value:function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1)}}]),e}(),le=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"allocate",value:function(e){return ve.createBuffer(e)}},{key:"trim",value:function(e,t){return e.slice(0,t)}},{key:"write",value:function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex)}}]),e}(),de=new fe,he=new le,Oe={allocate:function(){return null},write:function(){},trim:function(){return null}},be=Object(f.a)().vec3f(p.a.POSITION0).vec3f(p.a.POSITION1),ve=Object(f.a)().vec3f(p.a.POSITION0).vec3f(p.a.POSITION1).u16(p.a.COMPONENTINDEX).u16(p.a.U16PADDING,{glPadding:!0});function ge(){return new re}}}]);